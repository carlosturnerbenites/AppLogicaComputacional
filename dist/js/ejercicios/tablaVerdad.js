function crearEjercicio(e){ejecicioEnEjecucion=!0;var r=proposiciones;e.preventDefault(),htmlFormEjercicioPropuestoTablasVerdad.removeEventListener("submit",crearEjercicio);var o=Number(htmlInputNumeroProposicionesEscogidasPorUsuario.value),a=0;numeroCombinacionesPosibles=Math.pow(2,o);var t=document.createElement("table");t.id="tablarVerdad_js";var i=document.createElement("tr");i.id="headerTable_js";for(var n=0;o>=n;n++){var s=r.getElementRandom();r.splice(s.index,1);var l=document.createElement("th");if(n!=o){var c=new proposicion;c.letra=s.element,c.negacion=getValuBoolean(),c.getletraFinal(),arrayProposiciones.push(c),proposicionesCompuesta.push(c),l.innerHTML=s.element;var d=s+n;l.id=d,i.appendChild(l)}else{for(;arrayProposiciones.length>1;){for(var c,u=0;c=arrayProposiciones[u];u++){var a=0,a=0;if((u+1)%2==0){var p=conectores.getElementRandom(),m=new expresion(arrayProposiciones[0],arrayProposiciones[1],p.element);arrayProposiciones.push(m),arrayProposiciones.splice(a,2),a+=1}}expresionFinal=arrayProposiciones[0]}for(var h,v=0;h=arrayProposiciones[v];v++)if(arrayProposiciones.length>1&&h.constructor.name==expresion.name){var l=document.createElement("th");l.innerHTML=h.getExpresionCompleta(),l.setAttribute("expresionASolucionar","true"),i.appendChild(l)}var g=document.createElement("th");g.id="expresionASolucionar_js",g.setAttribute("expresionASolucionar","true"),i.appendChild(g)}}t.appendChild(i);for(var b=i.childElementCount,n=0;5>n;n++){for(var i=document.createElement("tr"),E=0;b>E;E++){var l=document.createElement("th");if(E>=o){l.classList.add("cancelPadding"),numeroColumna="col"+(E-o);var f=document.createElement("input");f.classList.add("respuestaEjercicio"),f.setAttribute("campoRespuesta","true"),f.setAttribute(numeroColumna,""),f.setAttribute("required","required"),f.setAttribute("maxlength","1"),f.addEventListener("change",verificarRespuestaIngresada),l.appendChild(f)}else{var C=posiblesValores[numeroAleatorio(2,0)];l.innerHTML=C,propActual=t.firstChild.childNodes[E],l.id=propActual.innerHTML+n,C==posiblesValores[0]?l.setAttribute("data-ValorBoleano",!0):l.setAttribute("data-ValorBoleano",!1)}l.addEventListener("dblclick",marcarColumna),i.appendChild(l)}t.appendChild(i)}btnAgregarColumna=document.createElement("button"),btnAgregarColumna.id="agregarFila_js",btnAgregarColumna.classList.add("icon-mas","agregarFila"),btnAgregarColumna.addEventListener("click",crearAgregarFila),sectionTablasVerdad.insertBefore(btnAgregarColumna,sectionTablasVerdad.firstChild),sectionTablasVerdad.insertBefore(htmlHrSeparadorContenido,sectionTablasVerdad.firstChild),htmlFormRespuestaUsuario.appendChild(t),htmlFormRespuestaUsuario.appendChild(btnValidar),htmlFormRespuestaUsuario.addEventListener("submit",capturarRespuesta),habilitarInhabilitarFormulario(this);for(var c,j=document.getElementById("expresionASolucionar_js"),u=0;c=arrayProposiciones[u];u++)c.constructor.name==proposicion.name?j.innerHTML+=c.getletraFinal():j.innerHTML+=c.getExpresionCompleta()}function capturarRespuesta(e){e.preventDefault(),respuestas=[];for(var r=document.querySelectorAll("[expresionasolucionar]"),o=0;o<r.length;o++){var a="[col"+o+"]",t=document.querySelectorAll(a);respuestas.push(t)}validarEjercicio(r,respuestas)}function validarEjercicio(respuestaEnviada,respuestas){for(var correcto=!0,j=0;j<respuestaEnviada.length;j++)for(var expresion=arrayProposiciones[j],k=0;k<respuestas[j].length;k++)if(expresion.constructor.name==expresion.name){var idp1=expresion.p1.letra+k;expresion.p1.valorBoleano=eval(document.getElementById(idp1).getAttribute("data-valorBoleano"));var idp2=expresion.p2.letra+k;expresion.p2.valorBoleano=eval(document.getElementById(idp2).getAttribute("data-valorBoleano")),expresion.p1.negar(),expresion.p2.negar(),respuestaCorrecta=expresion.conector.operar(),valorBooleanoIngresado=eval(respuestas[j][k].getAttribute("data-valorboleano")),valorBooleanoIngresado!=respuestaCorrecta&&(correcto=!1)}correcto?(crearYMostrarMensaje(0,msgEjercicioCompletado),habilitarInhabilitarFormulario(htmlFormRespuestaUsuario),htmlFormRespuestaUsuario.replaceChild(btnVolver,btnValidar),htmlFormRespuestaUsuario.removeEventListener("submit",capturarRespuesta),htmlFormRespuestaUsuario.addEventListener("submit",reiniciarEjercicio)):crearYMostrarMensaje(1,msgErrorEnEjercicio)}function verificarRespuestaIngresada(){var e=this.value.toUpperCase();e==posiblesValores[0]||e==posiblesValores[1]?(this.classList.remove("valorErroneo"),e==posiblesValores[0]?this.setAttribute("data-ValorBoleano",!0):this.setAttribute("data-ValorBoleano",!1)):(this.value="",this.setAttribute("data-ValorBoleano",void 0),this.classList.add("valorErroneo"))}function reiniciarEjercicio(){ejecicioEnEjecucion=!1,limpiarContenedorHTML(htmSectionContenedoraEjercicioPropuestoTablasVerdad),htmlFormEjercicioPropuestoTablasVerdad.addEventListener("submit",crearEjercicio),htmlFormRespuestaUsuario.addEventListener("submit",capturarRespuesta),habilitarInhabilitarFormulario(htmlFormEjercicioPropuestoTablasVerdad)}function crearAgregarFila(){for(var e=document.getElementById("tablarVerdad_js"),r=e.childNodes,o=0;o<r.length;o++){var a=document.createElement("th");a.id="ColumnadeApoyo",a.classList.add("cancelPadding"),a.addEventListener("dblclick",marcarColumna);var t=document.createElement("input");t.classList.add("respuestaEjercicio"),0==o?t.classList.add("textTransformDefault"):t.addEventListener("change",verificarRespuestaIngresada),a.appendChild(t),r[o].insertBefore(a,r[o].lastChild)}}function marcarColumna(){for(var e=this.cellIndex,r=this.parentNode,o=convertirHTMLCollectionEnArray(r.parentNode.rows),a=0;a<o.length;a++){hijosTr=convertirHTMLCollectionEnArray(o[a].childNodes);for(var t=0,i=hijosTr.length;i>t;t++)hijosTr[t].cellIndex==e&&hijosTr[t].classList.toggle("columnaMarcada")}}function and(e,r){this.simbolo=" Î› ",this.operar=function(){var o=e.valorBoleano&&r.valorBoleano;return o}}function or(e,r){this.simbolo=" V ",this.operar=function(){var o=e.valorBoleano||r.valorBoleano;return o}}function conditional(e,r){this.simbolo=" -> ",this.operar=function(){var o=!e.valorBoleano||r.valorBoleano;return o}}function biconditional(e,r){this.simbolo=" <-> ",this.operar=function(){var o=e.valorBoleano&&r.valorBoleano||!e.valorBoleano&&!r.valorBoleano;return o}}function getValuBoolean(){var e=numeroAleatorio(2,0);return!!e}function proposicion(){this.letra=new String,this.letraFinal=new String,this.negacion=new Boolean,this.valorBoleano=new Boolean,this.getletraFinal=function(){return this.negacion?this.letraFinal="!"+this.letra:this.letraFinal=this.letra,this.letraFinal},this.negar=function(){return this.negacion&&(this.valorBoleano=!this.valorBoleano),this.valorBoleano}}function expresion(p1,p2,conector){this.p1=p1,this.p2=p2,this.conector=eval("new "+conector+"(p1,p2)"),this.getExpresionCompleta=function(){this.p1.constructor.name==expresion.name&&this.p1.getExpresionCompleta(),this.p2.constructor.name==expresion.name&&this.p2.getExpresionCompleta()}}var respuestas=[],posiblesValores=["V","F"],proposiciones=["p","q","r","s","t","u","v","w","x","y"],conectores=["and","or","conditional","biconditional"],sectionTablasVerdad=document.getElementById("sectionTablasVerdad_js"),htmlFormRespuestaUsuario=document.getElementById("htmlFormRespuestaUsuario_js"),htmlFormEjercicioPropuestoTablasVerdad=document.getElementById("htmlFormEjercicioPropuestoTablasVerdad_js"),htmSectionContenedoraEjercicioPropuestoTablasVerdad=document.getElementById("sectionTablasVerdad_js"),htmlInputNumeroProposicionesEscogidasPorUsuario=document.getElementById("htmlInputNumeroProposicionesEscogidasPorUsuario_js"),numeroCombinacionesPosibles=0,maximaCantidadDeProposiciones=5;htmlInputNumeroProposicionesEscogidasPorUsuario.setAttribute("max",maximaCantidadDeProposiciones);var arrayProposiciones=new Array,proposicionesCompuesta=new Array,expresionFinal=new Array;htmlFormEjercicioPropuestoTablasVerdad.addEventListener("submit",crearEjercicio);